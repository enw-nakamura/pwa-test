<!DOCTYPE html>
<html lang="ja">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- vue.js　-->
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <link rel="manifest" href="manifest.json">
  <title>PWA Sample</title>
 </head>
 <body>
  <div id="app">
  <p><img src="images/icon.jpg" alt=""></p>
   <p>こんにちワン！</p>
  </div>
  <script>
   <!-- service workerの登録関係 -->
   if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service_worker.js')
     .then(function(registration) {
     console.log('ServiceWorker registration successful with scope: ', registration.scope);
     })
     .then(function (subscription) {
      console.log('GCM EndPoint is:' + subscription.endpoint);
      var auth = subscription.getKey('auth') ? btoa(String.fromCharCode.apply(null, new Uint8Array(subscription.getKey('auth')))) : '';
      console.log('User Auth is:' + auth);
      var publicKey = subscription.getKey('p256dh') ? btoa(String.fromCharCode.apply(null, new Uint8Array(subscription.getKey('p256dh')))) : '';
      console.log('User PublicKey is:' + publicKey);
     })
     .catch(function(err) {
      console.log('ServiceWorker registration failed: ', err);
     });
    }

  </script>
 </body>
</html>